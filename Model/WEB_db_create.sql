-- MySQL Script generated by MySQL Workbench
-- Tue Jan 15 16:14:52 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema web_db
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema web_db
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `web_db` DEFAULT CHARACTER SET utf8 ;
USE `web_db` ;

-- -----------------------------------------------------
-- Table `web_db`.`permissions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `web_db`.`permissions` ;

CREATE TABLE IF NOT EXISTS `web_db`.`permissions` (
  `idpermissions` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `level` INT(1) NOT NULL,
  PRIMARY KEY (`idpermissions`),
  UNIQUE INDEX `idpermissions_UNIQUE` (`idpermissions` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `web_db`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `web_db`.`users` ;

CREATE TABLE IF NOT EXISTS `web_db`.`users` (
  `idusers` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `login` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NULL,
  `permissions_idpermissions` INT NOT NULL,
  PRIMARY KEY (`idusers`, `permissions_idpermissions`),
  INDEX `fk_users_permissions_idx` (`permissions_idpermissions` ASC),
  UNIQUE INDEX `idusers_UNIQUE` (`idusers` ASC),
  UNIQUE INDEX `login_UNIQUE` (`login` ASC),
  CONSTRAINT `fk_users_permissions`
    FOREIGN KEY (`permissions_idpermissions`)
    REFERENCES `web_db`.`permissions` (`idpermissions`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `web_db`.`contributions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `web_db`.`contributions` ;

CREATE TABLE IF NOT EXISTS `web_db`.`contributions` (
  `idcontributions` INT NOT NULL AUTO_INCREMENT,
  `users_idusers` INT NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  `content` TEXT NULL,
  `file` VARCHAR(45) NULL,
  `decision` TINYINT NOT NULL DEFAULT 0,
  PRIMARY KEY (`idcontributions`),
  INDEX `fk_contributions_users1_idx` (`users_idusers` ASC),
  UNIQUE INDEX `idcontributions_UNIQUE` (`idcontributions` ASC),
  UNIQUE INDEX `file_UNIQUE` (`file` ASC),
  CONSTRAINT `fk_contributions_users1`
    FOREIGN KEY (`users_idusers`)
    REFERENCES `web_db`.`users` (`idusers`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `web_db`.`reviews`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `web_db`.`reviews` ;

CREATE TABLE IF NOT EXISTS `web_db`.`reviews` (
  `idreviews` INT NOT NULL AUTO_INCREMENT,
  `users_idusers` INT NOT NULL,
  `originality` INT(2) NULL,
  `subject` INT(2) NULL,
  `grammar` INT(2) NULL,
  `correctness` INT(2) NULL,
  `comment` TEXT NULL,
  `recommend` INT(1) NULL,
  `contributions_idcontributions` INT NOT NULL,
  PRIMARY KEY (`idreviews`),
  INDEX `fk_review_users1_idx` (`users_idusers` ASC),
  INDEX `fk_review_contributions1_idx` (`contributions_idcontributions` ASC),
  UNIQUE INDEX `idtable1_UNIQUE` (`idreviews` ASC),
  CONSTRAINT `fk_review_users1`
    FOREIGN KEY (`users_idusers`)
    REFERENCES `web_db`.`users` (`idusers`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_review_contributions1`
    FOREIGN KEY (`contributions_idcontributions`)
    REFERENCES `web_db`.`contributions` (`idcontributions`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `web_db`.`permissions`
-- -----------------------------------------------------
START TRANSACTION;
USE `web_db`;
INSERT INTO `web_db`.`permissions` (`idpermissions`, `name`, `level`) VALUES (1, 'Administrator', 1);
INSERT INTO `web_db`.`permissions` (`idpermissions`, `name`, `level`) VALUES (2, 'Reviewer', 2);
INSERT INTO `web_db`.`permissions` (`idpermissions`, `name`, `level`) VALUES (3, 'Author', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `web_db`.`users`
-- -----------------------------------------------------
START TRANSACTION;
USE `web_db`;
INSERT INTO `web_db`.`users` (`idusers`, `name`, `login`, `password`, `email`, `permissions_idpermissions`) VALUES (1, 'Default Administrator', 'admin', 'xadmin', 'Admin@xadmin.com', 1);
INSERT INTO `web_db`.`users` (`idusers`, `name`, `login`, `password`, `email`, `permissions_idpermissions`) VALUES (2, 'Default Reviewer', 'rev', 'xrev', 'Rev@xrev.com', 2);
INSERT INTO `web_db`.`users` (`idusers`, `name`, `login`, `password`, `email`, `permissions_idpermissions`) VALUES (3, 'Default Author', 'auth', 'xauth', 'Auth@xauth.com', 3);
INSERT INTO `web_db`.`users` (`idusers`, `name`, `login`, `password`, `email`, `permissions_idpermissions`) VALUES (4, 'Default Administrator2', 'admin2', 'xadmin2', 'Admin2@xadmin2.com', 1);
INSERT INTO `web_db`.`users` (`idusers`, `name`, `login`, `password`, `email`, `permissions_idpermissions`) VALUES (5, 'Default Reviewer2', 'rev2', 'xrev2', 'Rev2@xrev2.com', 2);
INSERT INTO `web_db`.`users` (`idusers`, `name`, `login`, `password`, `email`, `permissions_idpermissions`) VALUES (6, 'Default Author2', 'auth2', 'xauth2', 'Auth2@xauth2.com', 3);
INSERT INTO `web_db`.`users` (`idusers`, `name`, `login`, `password`, `email`, `permissions_idpermissions`) VALUES (7, 'Default Reviewer3', 'rev3', 'xrev3', 'Rev3@xrev3.com', 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `web_db`.`contributions`
-- -----------------------------------------------------
START TRANSACTION;
USE `web_db`;
INSERT INTO `web_db`.`contributions` (`idcontributions`, `users_idusers`, `name`, `content`, `file`, `decision`) VALUES (1, 1, 'Default Admin\'s contribution', 'County commissioners talk about the cost of their administrator and his future ', 'Admin_article.pdf', DEFAULT);
INSERT INTO `web_db`.`contributions` (`idcontributions`, `users_idusers`, `name`, `content`, `file`, `decision`) VALUES (2, 2, 'Default  Reviewer\'s contribution', 'Dead, Sick Puppies Found In GA Pet Stores: Humane Society Report', 'Reviewer_article.pdf', DEFAULT);
INSERT INTO `web_db`.`contributions` (`idcontributions`, `users_idusers`, `name`, `content`, `file`, `decision`) VALUES (3, 3, 'Default Author\'s contribution', 'Favoring Female Flowers in Hemp Horticulture', 'Author_article.pdf', DEFAULT);
INSERT INTO `web_db`.`contributions` (`idcontributions`, `users_idusers`, `name`, `content`, `file`, `decision`) VALUES (4, 3, 'Default Author\'s contribution vol.2', 'In a first, Isro will make dead rocket stage alive in space for experiments', 'Author2_article.pdf', DEFAULT);
INSERT INTO `web_db`.`contributions` (`idcontributions`, `users_idusers`, `name`, `content`, `file`, `decision`) VALUES (5, 3, 'Default Author2 no-file', 'Broomes, opposition clash over funding for forestry study', 'Doc.pdf', DEFAULT);

COMMIT;


-- -----------------------------------------------------
-- Data for table `web_db`.`reviews`
-- -----------------------------------------------------
START TRANSACTION;
USE `web_db`;
INSERT INTO `web_db`.`reviews` (`idreviews`, `users_idusers`, `originality`, `subject`, `grammar`, `correctness`, `comment`, `recommend`, `contributions_idcontributions`) VALUES (1, 2, 7, 4, 5, 2, 'Too vague', NULL, 3);
INSERT INTO `web_db`.`reviews` (`idreviews`, `users_idusers`, `originality`, `subject`, `grammar`, `correctness`, `comment`, `recommend`, `contributions_idcontributions`) VALUES (2, 5, 9, 5, 2, 5, 'Very nice article', 1, 3);
INSERT INTO `web_db`.`reviews` (`idreviews`, `users_idusers`, `originality`, `subject`, `grammar`, `correctness`, `comment`, `recommend`, `contributions_idcontributions`) VALUES (3, 2, NULL, NULL, NULL, NULL, NULL, NULL, 3);
INSERT INTO `web_db`.`reviews` (`idreviews`, `users_idusers`, `originality`, `subject`, `grammar`, `correctness`, `comment`, `recommend`, `contributions_idcontributions`) VALUES (4, 2, NULL, NULL, 5, NULL, NULL, NULL, 1);

COMMIT;

